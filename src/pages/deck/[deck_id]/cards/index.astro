---
import Overview from "../../../../components/deck/Overview.astro";
const { deck_id } = Astro.params;
import { db, eq, Deck, Card } from "astro:db";
import { getSession } from "auth-astro/server";
import Default from "../../../../layouts/Default.astro";
import Cards from "../../../../components/deck/Cards.astro";

const session = await getSession(Astro.request);

const deck = await db.select().from(Deck).where(eq(Deck.id, deck_id));

---
{!session ? (
  <script>window.location.replace("/")</script>
) : (
  <Default>
    <Cards deck_id={deck_id} />
  </Default>
)}